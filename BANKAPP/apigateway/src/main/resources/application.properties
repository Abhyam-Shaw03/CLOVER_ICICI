############  SERVICE CONFIGURATION ############


spring.application.name=apigateway
server.port=8765

# Eureka Client Configuration (Ensure API Gateway registers with Eureka)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.instance.prefer-ip-address=true

# Enable Spring Cloud Gateway (MVC-based) with Eureka Discovery
#spring.cloud.gateway.discovery.locator.enabled=true

# IF THE BELOW LINE IS FALSE THEN GIVE THE MANUAL ROUTING FOR EACH SERVICE
spring.cloud.gateway.discovery.locator.enabled=false
spring.cloud.gateway.discovery.locator.lower-case-service-id=true
spring.cloud.gateway.mvc.enabled=true

############  LOGGING CONFIGURATION ############

# Enable DEBUG logs for API Gateway
logging.level.org.springframework.cloud.gateway=DEBUG

# Enable logs for WebClient (used by API Gateway for HTTP calls)
logging.level.reactor.netty.http.client=DEBUG

# Enable Eureka Client logs
logging.level.com.netflix.discovery=DEBUG
logging.level.com.netflix.eureka=DEBUG

# Enable detailed startup logging
logging.level.org.springframework=INFO
logging.level.org.springframework.boot=INFO
logging.level.org.springframework.web=DEBUG
logging.level.root=INFO

# Log output format
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n

# Log file (Ensures logs are written to a dedicated file)
logging.file.name=logs/api-gateway.log

############  ROUTING CONFIGURATION ############

# Define Routing for Microservices (MVC-based Gateway)
spring.cloud.gateway.routes[0].id=user-service
spring.cloud.gateway.routes[0].uri=lb://user-service
spring.cloud.gateway.routes[0].predicates[0]=Path=/user/**

